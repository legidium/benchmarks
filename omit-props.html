<!DOCTYPE html>
<html>
<head> 
  <meta charset="utf-8">
  <title>JS Bin</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/lodash/4/lodash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/platform/1.3.3/platform.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/benchmark/2.1.3/benchmark.min.js"></script>
</head>
<body>
  <div id="app"></div>
  <script>
    var HTMLAttributes = [
      // React-specific Attributes
      'defaultChecked',
      'defaultValue',
      // Standard HTML Attributes
      'accept',
      'acceptCharset',
      'accessKey',
      'action',
      'allowFullScreen',
      'allowTransparency',
      'alt',
      'async',
      'autoComplete',
      'autoFocus',
      'autoPlay',
      'capture',
      'cellPadding',
      'cellSpacing',
      'charSet',
      'challenge',
      'checked',
      'classID',
      'className',
      'cols',
      'colSpan',
      'content',
      'contentEditable',
      'contextMenu',
      'controls',
      'coords',
      'crossOrigin',
      'data',
      'dateTime',
      'default',
      'defer',
      'dir',
      'disabled',
      'download',
      'draggable',
      'encType',
      'form',
      'formAction',
      'formEncType',
      'formMethod',
      'formNoValidate',
      'formTarget',
      'frameBorder',
      'headers',
      'height',
      'hidden',
      'high',
      'href',
      'hrefLang',
      'htmlFor',
      'httpEquiv',
      'id',
      'inputMode',
      'integrity',
      'is',
      'keyParams',
      'keyType',
      'kind',
      'label',
      'lang',
      'list',
      'loop',
      'low',
      'manifest',
      'marginHeight',
      'marginWidth',
      'max',
      'maxLength',
      'media',
      'mediaGroup',
      'method',
      'min',
      'minLength',
      'multiple',
      'muted',
      'name',
      'nonce',
      'noValidate',
      'open',
      'optimum',
      'pattern',
      'placeholder',
      'playsInline',
      'poster',
      'preload',
      'radioGroup',
      'readOnly',
      'rel',
      'required',
      'reversed',
      'role',
      'rows',
      'rowSpan',
      'sandbox',
      'scope',
      'scoped',
      'scrolling',
      'seamless',
      'selected',
      'shape',
      'size',
      'sizes',
      'span',
      'spellCheck',
      'src',
      'srcDoc',
      'srcLang',
      'srcSet',
      'start',
      'step',
      'style',
      'summary',
      'tabIndex',
      'target',
      'title',
      'type',
      'useMap',
      'value',
      'width',
      'wmode',
      'wrap',

      // RDFa Attributes
      'about',
      'datatype',
      'inlist',
      'prefix',
      'property',
      'resource',
      'typeof',
      'vocab',

      // Non-standard Attributes
      'autoCapitalize',
      'autoCorrect',
      'autoSave',
      'color',
      'itemProp',
      'itemScope',
      'itemType',
      'itemID',
      'itemRef',
      'results',
      'security',
      'unselectable',
      
      'children',
      'dangerouslySetInnerHTML',

      // Clipboard Events
      'onCopy',
      'onCopyCapture',
      'onCut',
      'onCutCapture',
      'onPaste',
      'onPasteCapture',

      // Composition Events
      'onCompositionEnd',
      'onCompositionEndCapture',
      'onCompositionStart',
      'onCompositionStartCapture',
      'onCompositionUpdate',
      'onCompositionUpdateCapture',

      // Focus Events
      'onFocus',
      'onFocusCapture',
      'onBlur',
      'onBlurCapture',

      // Form Events
      'onChange',
      'onChangeCapture',
      'onInput',
      'onInputCapture',
      'onReset',
      'onResetCapture',
      'onSubmit',
      'onSubmitCapture',

      // Image Events
      'onLoad',
      'onLoadCapture',
      'onError',
      'onErrorCapture',

      // Keyboard Events
      'onKeyDown',
      'onKeyDownCapture',
      'onKeyPress',
      'onKeyPressCapture',
      'onKeyUp',
      'onKeyUpCapture',

      // Media Events
      'onAbort',
      'onAbortCapture',
      'onCanPlay',
      'onCanPlayCapture',
      'onCanPlayThrough',
      'onCanPlayThroughCapture',
      'onDurationChange',
      'onDurationChangeCapture',
      'onEmptied',
      'onEmptiedCapture',
      'onEncrypted',
      'onEncryptedCapture',
      'onEnded',
      'onEndedCapture',
      'onLoadedData',
      'onLoadedDataCapture',
      'onLoadedMetadata',
      'onLoadedMetadataCapture',
      'onLoadStart',
      'onLoadStartCapture',
      'onPause',
      'onPauseCapture',
      'onPlay',
      'onPlayCapture',
      'onPlaying',
      'onPlayingCapture',
      'onProgress',
      'onProgressCapture',
      'onRateChange',
      'onRateChangeCapture',
      'onSeeked',
      'onSeekedCapture',
      'onSeeking',
      'onSeekingCapture',
      'onStalled',
      'onStalledCapture',
      'onSuspend',
      'onSuspendCapture',
      'onTimeUpdate',
      'onTimeUpdateCapture',
      'onVolumeChange',
      'onVolumeChangeCapture',
      'onWaiting',
      'onWaitingCapture',

      // MouseEvents
      'onClick',
      'onClickCapture',
      'onContextMenu',
      'onContextMenuCapture',
      'onDoubleClick',
      'onDoubleClickCapture',
      'onDrag',
      'onDragCapture',
      'onDragEnd',
      'onDragEndCapture',
      'onDragEnter',
      'onDragEnterCapture',
      'onDragExit',
      'onDragExitCapture',
      'onDragLeave',
      'onDragLeaveCapture',
      'onDragOver',
      'onDragOverCapture',
      'onDragStart',
      'onDragStartCapture',
      'onDrop',
      'onDropCapture',
      'onMouseDown',
      'onMouseDownCapture',
      'onMouseEnter',
      'onMouseLeave',
      'onMouseMove',
      'onMouseMoveCapture',
      'onMouseOut',
      'onMouseOutCapture',
      'onMouseOver',
      'onMouseOverCapture',
      'onMouseUp',
      'onMouseUpCapture',

      // Selection Events
      'onSelect',
      'onSelectCapture',

      // Touch Events
      'onTouchCancel',
      'onTouchCancelCapture',
      'onTouchEnd',
      'onTouchEndCapture',
      'onTouchMove',
      'onTouchMoveCapture',
      'onTouchStart',
      'onTouchStartCapture',

      // UI Events
      'onScroll',
      'onScrollCapture',

      // Wheel Events
      'onWheel',
      'onWheelCapture',

      // Animation Events
      'onAnimationStart',
      'onAnimationStartCapture',
      'onAnimationEnd',
      'onAnimationEndCapture',
      'onAnimationIteration',
      'onAnimationIterationCapture',

      // Transition Events
      'onTransitionEnd',
      'onTransitionEndCapture'
  ];

  function omitProps(obj, keys) {
    var target = {};
    for (var i in obj) {
      if (keys.indexOf(i) >= 0) continue;
      if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;
      target[i] = obj[i];
    }
    return target;
  }


  var props = {id: 'test', hello: 'hello'};
  var attrs1;
  var attrs2;
  var attrs3;
  
  var runs = 100;
  var $app = $('#app');
  
  var suite = new Benchmark.Suite();

  $app.append('<b style="color:red;">Please wait...</b>');

  suite.add('lodash.pick', function() {
    for (var i = 0; i < runs; i++) {
      attrs1 = _.pick(props, HTMLAttributes);
    }
  })
  .add('lodash.omit', function() {
    for (var i = 0; i < runs; i++) {
      attrs2 = _.omit(props, ['hello']);
    }
  })
  .add('omitProps', function() {
    for (var i = 0; i < runs; i++) {
      attrs3 = omitProps(props, ['hello']);
    }
  })
  .on('cycle', function(event) {
    $app.append('<p>' + String(event.target) + '</p>');
  })
  .on('complete', function() {
    $app.append('<hr />');
    $app.append('<p>' + 'Fastest is ' + this.filter('fastest').map('name') + '</p>');
    console.log(attrs1, attrs2, attrs3);
  })
  .run({ 'async': true, queed: true});


  </script>
</div>
</body>
</html>
